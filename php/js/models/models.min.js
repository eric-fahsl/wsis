var app=app||{};app.DateModel=Backbone.Model.extend({urlBase:"#search/",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],initialize:function(e,t){var n={};if(t){n=t}var r=new Date(this.get("date").split("-").join("/"));var i=this.days[r.getUTCDay()]+", "+this.months[r.getUTCMonth()]+" "+r.getUTCDate();this.set({prettyDate:i});this.set({url:this.convertFacetsToString(n,"date",this.get("date"))})},convertFacetsToString:function(e,t,n){var r=this.urlBase;var i=true;for(var s in e){if(e[s]!=n)r+=s+"="+e[s]+"&";else i=false}if(i)r+=t+"="+n;if(r[r.length-1]=="&")r=r.substr(0,r.length-1);return r}});var app=app||{};app.Facet=Backbone.Model.extend({days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],urlBase:"#search/",facetType:"",initialize:function(e,t){var n={};if(t){n=t.collection.facets;this.facetType=t.collection.facetType}var r="";if(this.attributes.term){r=this.attributes.term;this.set({displayValue:r});if(r.substring(0,3)=="201"){var i=new Date(r.split("-").join("/"));var s=this.days[i.getUTCDay()]+" "+(i.getUTCMonth()+1)+"/"+i.getUTCDate()+"/"+i.getUTCFullYear().toString().substring(2);this.set({displayValue:s})}}if(this.facetType=="distance"){var o=this.attributes.to;this.set({term:o});this.set({displayValue:"Under "+o+" Miles"})}else if(this.facetType=="powder"){var u=this.attributes.from;this.set({term:u});this.set({displayValue:"At least <div class='flakes' style='width: "+30*u+"px;'></div>"})}this.set({url:this.convertFacetsToString(n,this.facetType,this.attributes.term)})},convertFacetsToString:function(e,t,n){var r=this.urlBase;var i=true;for(var s in e){if(e[s]!=n)r+=s+"="+e[s]+"&";else i=false}if(i)r+=t+"="+n;if(r[r.length-1]=="&")r=r.substr(0,r.length-1);return r}});var app=app||{};app.Recc=Backbone.Model.extend({initialize:function(e){if(e.fields&&e.fields["freezing_level.rating"]){var t=-24+24/4*(e.fields["freezing_level.rating"]-1);e.fields["freezing_level.offset"]=t}this.model=e}});var app=app||{};app.SortOption=app.Facet.extend({initialize:function(e,t){e.selected=false;var n={};if(t){n=t;if(n.sort&&n.sort==e.sort)e.selected=true}this.attributes=e;this.set({url:this.convertFacetsToString(n,"sort",this.attributes.sort)})},convertFacetsToString:function(e,t,n){var r=this.urlBase;var i=true;for(var s in e){if(s==t){}else if(e[s]!=n)r+=s+"="+e[s]+"&";else i=false}if(i)r+=t+"="+n;if(r[r.length-1]=="&")r=r.substr(0,r.length-1);return r}})